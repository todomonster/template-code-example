<!-- https://github.com/meistudioli/msc-tags-collector -->
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Web Component: &lt;msc-tags-collector /> - web components based input field for tags</title>
<meta name="description" content="msc-tags-collector is a web component for input tags purpose. Users could key in anything they like (include space). Besides that sorting has already build-in with msc-tags-collector. We can go by „ÄåDRAG„Äçand„ÄåDROP„Äçor ‚Üê„ÄÅ‚Üí to arrange tag orders we like." />
<link rel="stylesheet" href="css/fuji-set.css">
<!-- Ê†∏ÂøÉ -->
<script type="module" src="mjs/wc-msc-tags-collector.js"></script>
<!--  -->
<style>
/* reset */
body,div,ul,ol,li,h1,h2,h3,h4,h5,h6,pre,form,fieldset,legend,input,textarea,p,article,aside,figcaption,figure,nav,section,mark,audio,video,main{margin:0;padding:0}
article,aside,figcaption,figure,nav,section,main{display:block}
fieldset,img{border:0}
address,caption,cite,em,strong{font-style:normal;font-weight:400}
ol,ul{list-style:none}
caption{text-align:left}
h1,h2,h3,h4,h5,h6{font-size:100%;font-weight:400}
abbr{border:0;font-variant:normal}
input,textarea,select{font-family:inherit;font-size:inherit;font-weight:inherit;}
body{-webkit-text-size-adjust:none}
select,input,button,textarea{font:100% arial,helvetica,clean,sans-serif;}
del{font-style:normal;text-decoration:none}
pre{font-family:monospace;line-height:100%}
progress{-webkit-appearance:none;appearance:none;overflow:hidden;border:0 none;}

/* page */
html,body{font-family:system-ui,sans-serif;text-size-adjust:100%;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;font-size:16px;}
#hd,#ft{display:none;}

body{position:relative;inline-size:100vw;block-size:100vh;margin:0;}
.flex-center{display:flex;justify-content:center;align-items:center;}
.wrap{inline-size:100%;max-inline-size:min(600px, calc(100% - 2em));box-sizing:border-box;}
.hero{inline-size:100%;background-color:#dce2f0;border-radius:.5em;padding:2em;box-sizing:border-box;}

.setting-form {
  --background-color: #dce2f0;
  --default-theme: rgba(var(--dory));
}

.setting-form .buttons[data-type]{
  --overlay-color: var(--inkwell);
}

.setting-form{inline-size:min(100%,600px);border-radius:.5em;box-sizing:border-box;padding:1.5em 1em;background-color:var(--background-color);margin-block:2.5em;display:flex;flex-direction:column;gap:1em;margin-inline:auto;}
.setting-form .buttons{align-self:flex-end;}

/* input-set */
.input-set-cocoon {
  --cocoon-bgc: rgba(255 255 255);
}

.input-set-cocoon:focus-within {
  --border-color: var(--hover);
  --border-size: var(--border-size-active);
  --label-text-color: var(--hover);
}
.input-set-cocoon{position:relative;border-radius:4px;background-color:var(--cocoon-bgc);box-shadow: inset calc(var(--border-size) * -1) calc(var(--border-size) * -1) 0 var(--border-color), inset var(--border-size) var(--border-size) 0 var(--border-color);}
.input-set-cocoon .input-set__label{transform: translateY(-24px) scale(0.85);}
@media (hover: hover) {
  .input-set-cocoon:hover {
    --label-text-color: var(--hover);
  }
}

@media (prefers-color-scheme: dark) {
  .setting-form:not(.esc-dark-mode) {
    --background-color: rgba(var(--inkwell));
  }

  .setting-form .buttons[data-type]{
    --overlay-color: 224 228 233;
  }

  .buttons[data-type='secondary1'] {
    --default-text-color: rgba(18 169 255);
  }

  .input-set-cocoon {
    --default-background-color: rgba(0 0 0);
    --default-theme: rgba(18 169 255);
    --cocoon-bgc: rgba(16 21 24);
  }
}

@media screen and (max-width: 767px) {
  .setting-form .buttons{inline-size:100%;}
}

/* msc-tags-collector */
msc-tags-collector:not(:defined){display:none;}

.input-set msc-tags-collector {
  --msc-tags-collector-padding: 1.5em .75em;
}

.input-set msc-tags-collector:not(:defined) {
  padding: 1.5em .75em;
  display: block;
}

@media (prefers-color-scheme: dark) {
  msc-tags-collector {
    --a11y-block-link-overlay-color: 224 228 233;

    --msc-tags-collector-input-color: rgba(255 255 255);
    --msc-tags-collector-input-placeholder-color: rgba(117 117 117);
    --msc-tags-collector-caret-color: rgba(255 255 255);

    --msc-tags-collector-tag-color: rgba(255 255 255);
    --msc-tags-collector-tag-background-color: rgba(62 62 62);
    --msc-tags-collector-tag-focus-border-color: rgba(105 162 249);
    --msc-tags-collector-tag-remove-color: rgba(255 255 255);
  }
}
</style>
</head>

<body class="flex-center">
<div class="wrap">
  <div class="demo-wrap">
    <form class="setting-form">
      <div class="input-set input-set-cocoon">
        <!-- Ê†∏ÂøÉ -->
        <msc-tags-collector>
          <script type="application/json">
            {
              "placeholder": [
                "web component",
                "msc-tags-collector",
                "fantasy",
                "drama",
                "mew üò∫"
              ],
              "l10n": {
                "placeholder": "tag"
              },
              "limitation": {
                "maxcount": 10,
                "maxlength": 30
              }
            }
          </script>
        </msc-tags-collector>
        <!--  -->

        <label class="input-set__label">
          <span class="input-set__label__span">Input Tags</span>
        </label>
      </div>

      <button
        class="buttons"
        data-type="secondary1"
        data-size="large"
      >
        GET TAGS
      </button>
    </form>
  </div>
</div>

<script type="module">
customElements.whenDefined('msc-tags-collector').then(() => {
  const collector = document.querySelector('msc-tags-collector');
  const form = document.querySelector('form');

  const events = [
    'msc-tags-collector-input',
    'msc-tags-collector-mutate',
    'msc-tags-collector-error'
  ];

  const handler = (evt) => {
    const { type, detail = null } = evt;

    switch (type) {
      case 'msc-tags-collector-input': {
        const { tag } = detail;

        console.log(
          `%c${type}%c >„Äå%c${tag}%c„Äçhas been inputed.`,
          'font-size:12px;line-height:1.3;background:#3a99d8;color:#fff;border-radius:3px;padding:0 4px;',
          'font-size:12px;line-height:1.3;',
          'font-size:12px;line-height:1.3;color:#a4f6b7;',
          'font-size:12px;line-height:1.3;'
        );
        break;
      }

      case 'msc-tags-collector-mutate': {
        const { tags = [] } = detail;

        console.log(
          `%c${type}%c > tags has been mutated.`,
          'font-size:12px;line-height:1.3;background:#3a99d8;color:#fff;border-radius:3px;padding:0 4px;',
          'font-size:12px;line-height:1.3;'
        );

        console.log(tags);
        break;
      }

      case 'msc-tags-collector-error':
        const { message = '', tag, illegalkey } = detail;
        const {
          limitation: {
            maxcount
          }
        } = collector;

        console.log(
          `%c${type}%c > Error:„Äå%c${message}%c„Äçoccured.`,
          'font-size:12px;line-height:1.3;background:#3a99d8;color:#fff;border-radius:3px;padding:0 4px;',
          'font-size:12px;line-height:1.3;',
          'font-size:12px;line-height:1.3;color:#a4f6b7;',
          'font-size:12px;line-height:1.3;'
        );

        let hint = '';
        switch (message) {
          case 'empty content':
            hint = 'Input tag please.';
            break;

          case 'exceed maxcount':
            hint = `Tags count has already reach ${maxcount} pieces.`;
            break;

          case 'duplicate tag':
            hint = `Tag„Äå${tag}„Äçexist.`;
            break;

          case 'missing tag':
            hint = `Tag„Äå${tag}„Äçmissing.`;
            break;

          case 'contain illegal key':
            hint = `Ê®ôÁ±§Èö±Âê´‰∏çÂêàÊ≥ïÂ≠óÂÖÉ„Äå${illegalkey}„ÄçÔºåÁÑ°Ê≥ïÂä†ÂÖ•„ÄÇ`;
            break;
        }

        console.log(hint);
        break;
    }
  };

  events.map(
    (event) => {
      collector.addEventListener(event, handler);
    }
  );

  form.addEventListener('submit',
    (evt) => {
      evt.preventDefault();

      const tagsInfo = collector.tagsInfo;
      let message = '';

      if (tagsInfo.length) {
        message = tagsInfo
          .map(
            (tag) => {
              return `„Äå${tag}„Äç`;
            }
          ).join('„ÄÅ');
        message = `Tags informationÔºö${message}„ÄÇ`
      } else {
        message = 'No tag exist.';
      }

      console.log(message);
    }
  );
});
</script>
</body>

</html>